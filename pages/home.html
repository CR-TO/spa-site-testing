
<template>

    <style>
        div {
            flex-direction: column;
        }

        button {
            width: 20vmin;
            height: 5vmin;
            font-size: 2vmin;
            border-radius: 10vmin;
            border: 2px solid darkgreen;
            background-color: limegreen;
            color: black;
            transition: 250ms;
        }

        button:hover {
            cursor: pointer;
            transform: scale(1.05);
        }
    </style>

    <main id='main'>
        <div>
            <p>Counter: <span id="counter-span"></span></p>
            <button id="counter-button">Count!</button>
            <button id="storage-clear">Clear storage</button>
        </div>
    </main>
</template>

<script>

import { store } from '../store.js'

import { router, routes, getPage } from '../router.js'

const init = () => {

    const counterButton = document.querySelector('#counter-button')
    const counterSpan = document.querySelector('#counter-span')
    counterButton.addEventListener('click', () => {
        store.set('counter', parseInt(store.get('counter') ?? 0) + 1);
        counterSpan.textContent = store.get('counter')
    })

    counterSpan.textContent = store.get('counter') ?? 0;

    const clearStorage = document.querySelector('#storage-clear');
    clearStorage.addEventListener('click', async () => {
        store.set('counter', 0);
        counterSpan.textContent = store.get('counter')
        router.setLocation('/');
    })

    routes['/page'] = './page.html';
}

init();

</script>